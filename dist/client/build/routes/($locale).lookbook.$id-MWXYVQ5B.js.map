{
  "version": 3,
  "sources": ["../../../../app/routes/($locale).lookbook.$id.jsx"],
  "sourcesContent": ["import {json} from '@shopify/remix-oxygen';\nimport {useLoaderData} from '@remix-run/react';\nimport { useEffect, useState } from 'react';\n\n\nexport async function loader({params, context}) {\n    const {storefront} = context;\n    if (!params.id) {\n        return redirect('/');\n    }\n  return json({lookbook_id:params.id , storefront});\n}\n\nexport async function action({request, context}) {\n  const {session, cart} = context;\n\n  const [formData, customerAccessToken] = await Promise.all([\n    request.formData(),\n    session.get('customerAccessToken'),\n  ]);\n\n  const {action, inputs} = CartForm.getFormInput(formData);\n\n  console.log(\"action:\",inputs);\n}\n\nexport default function LookBook() {\n    const { lookbook_id, storefront } = useLoaderData();\n    const [p_id, setId] = useState()\n    useEffect(()=>{\n        setId(lookbook_id);\n        document.addEventListener('stl.widgetHasBennLoaded', function() {\n          // Add a checkbox in front of each product image which has value from product id\n         document.querySelectorAll('.ctl-product-img-link.ctl-product-link.js-ctl-product-link').forEach(function(link) {\n              var productId = link.closest('.stl__products_element.js-ctl-product-component').getAttribute('data-product-id');\n              var checkbox = document.createElement('input');\n              checkbox.type = 'checkbox';\n              checkbox.value = productId;\n              // Insert the checkbox before the link\n              link.parentNode.insertBefore(checkbox, link);\n          });\n      \n          // Override add to cart to trigger a checkout redirect\n          document.querySelectorAll('.js-action.shopthelook_add-to-cart').forEach(function(button) {\n              button.addEventListener('click', async function(event) {\n                  event.preventDefault(); // Prevent the default behaviour from Shop The Look\n                  console.log(\"OVERRIDE CART CALL STOREFRONT\");\n                  // @todo: Get selected products from checkbox\n                  //window.location.href = '/checkout'; // Add your own redirect link here\n              });\n          });\n      });\n    },[])\n\n  \n   \n    const mutationCart = `{ cartCreate(\n      input: {\n        lines: [\n          {\n            quantity: 1\n            merchandiseId: \"gid://shopify/ProductVariant/1\"\n          }\n        ],\n        attributes: {\n          key: \"cart_attribute\",\n          value: \"This is a cart attribute\"\n        }\n      }\n    )\n  }`\n    \n    \n    return (\n      <div className=\"page\">\n        <script src={`https://shopify.shopthelook.app/shopthelook.js?shop=15f63f.myshopify.com&widget=1&mainProductId=${lookbook_id}`}></script>\n        <script src=\"../lookbook.js\"></script>\n        <div class=\"ShopTheLook-section\" data-product-id={p_id}></div>\n      </div>\n    );\n  }"],
  "mappings": ";;;;;;;;;;AAEA,IAAAA,gBAAoC;AAyE5B;AAjDO,SAAR,WAA4B;AAC/B,QAAM,EAAE,aAAa,WAAW,IAAI,cAAc;AAClD,QAAM,CAAC,MAAM,KAAK,QAAI,wBAAS;AAC/B,+BAAU,MAAI;AACV,UAAM,WAAW;AACjB,aAAS,iBAAiB,2BAA2B,WAAW;AAE/D,eAAS,iBAAiB,4DAA4D,EAAE,QAAQ,SAAS,MAAM;AAC1G,YAAI,YAAY,KAAK,QAAQ,iDAAiD,EAAE,aAAa,iBAAiB;AAC9G,YAAI,WAAW,SAAS,cAAc,OAAO;AAC7C,iBAAS,OAAO;AAChB,iBAAS,QAAQ;AAEjB,aAAK,WAAW,aAAa,UAAU,IAAI;AAAA,MAC/C,CAAC;AAGD,eAAS,iBAAiB,oCAAoC,EAAE,QAAQ,SAAS,QAAQ;AACrF,eAAO,iBAAiB,SAAS,eAAe,OAAO;AACnD,gBAAM,eAAe;AACrB,kBAAQ,IAAI,+BAA+B;AAAA,QAG/C,CAAC;AAAA,MACL,CAAC;AAAA,IACL,CAAC;AAAA,EACH,GAAE,CAAC,CAAC;AAIJ,QAAM,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBrB,SACE,mDAAC,SAAI,WAAU,QACb;AAAA,uDAAC,YAAO,KAAK,mGAAmG,iBAAhH;AAAA;AAAA;AAAA;AAAA,WAA+H;AAAA,IAC/H,mDAAC,YAAO,KAAI,oBAAZ;AAAA;AAAA;AAAA;AAAA,WAA6B;AAAA,IAC7B,mDAAC,SAAI,OAAM,uBAAsB,mBAAiB,QAAlD;AAAA;AAAA;AAAA;AAAA,WAAwD;AAAA,OAH1D;AAAA;AAAA;AAAA;AAAA,SAIA;AAEJ;",
  "names": ["import_react"]
}
